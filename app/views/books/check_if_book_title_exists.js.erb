console.log("Supertest");

var book_title = document.querySelector("#book-title");
var similar_books = document.querySelector(".similar-books");

book_title.addEventListener("keyup", function () {
  $.ajax({
    url: '<%= check_if_book_title_exists_path %>',
    type: "GET",
    data: { title: $(book_title).val() },
    complete: function() {
      console.log("Sent to Controller");
    },
    success: function(data, textStatus, xhr) {
    	if (data['success'] == 0)
        {
                    console.log(data['message']);
                    console.log(data);
                    console.log(similar_books);
                    similar_books.classList.add("similar-show");
                    $(document).find('.similar-books-content').html('<br>' + data['message']['0']['title']);
                   }
                   else
                   {
                    similar_books.classList.remove("similar-show");
                   }
      },
      error: function() {
            alert("Your Ajax error! message")
      }
    });
  });